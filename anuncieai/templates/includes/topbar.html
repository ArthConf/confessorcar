{% load static %}

<!-- Navbar Start -->
<div class="container-fluid">
    <nav class="navbar navbar-expand-lg navbar-light bg-light py-3">
        <div class="container">
            <!-- Logo -->
            <a href="{% url 'home' %}" class="navbar-brand">
                <img src="{% static 'img/logo_anuncieai.png' %}" alt="AnuncieAI Logo" class="logo-img">
            </a>

            <!-- Toggle Button for Mobile -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Navigation Links -->
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item">
                        <a href="{% url 'home' %}" class="nav-link">Home</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="categoriesDropdown" role="button" data-toggle="dropdown">
                            Categorias
                        </a>
                        <div class="dropdown-menu" aria-labelledby="categoriesDropdown">
                            {% for cat in opcoes %}
                            <a class="dropdown-item" href="{% url 'produtos:produto_por_categoria' cat.slug %}">{{ cat.categoria_nome }}</a>
                            {% endfor %}
                        </div>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'produtos:loja' %}" class="nav-link">Loja</a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">Contato</a>
                    </li>
                </ul>

               <!-- Right Side Items -->
                <div class="navbar-nav ml-auto">
                    {% if user.is_authenticated %}
                        {% if user.is_staff %}
                        <!-- Admin Dropdown -->
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="adminDropdown" role="button" data-toggle="dropdown">
                                <i class="fas fa-cog"></i> Administração
                            </a>
                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="adminDropdown">
                                <a class="dropdown-item" href="{% url 'categoria:gerenciar_categorias' %}">
                                    <i class="fas fa-tags"></i> Gerenciar Categorias
                                </a>
                                <a class="dropdown-item" href="#">
                                    <i class="fas fa-box"></i> Gerenciar Produtos
                                </a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="{% url 'admin:index' %}">
                                    <i class="fas fa-toolbox"></i> Painel Admin
                                </a>
                            </div>
                        </li>
                        {% endif %}
                        <a href="#" class="nav-item nav-link">Minha Conta</a>
                        <a href="{% url 'admin:logout' %}" class="nav-item nav-link">Sair</a>
                    {% else %}
                        <a href="{% url 'admin:login' %}" class="nav-item nav-link">Login</a>
                        <a href="#" class="nav-item nav-link">Register</a>
                    {% endif %}
                    <!--<a href="#" class="nav-item nav-link">
                        <i class="fas fa-shopping-cart text-primary"></i>
                        <span class="badge">{% if cart_count %}{{ cart_count }}{% else %}0{% endif %}</span>
                    </a>-->
                </div>
            </div>
        </div>
    </nav>
</div>
<!-- Navbar End -->

<style>
.logo-img {
    height: 10rem;
    width: auto;
    text-align: left;
    object-fit: contain;
}

.navbar-brand {
    padding: 0;
    margin-right: 2rem;
}

.navbar {
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.navbar-nav .nav-link {
    font-weight: 500;
    padding: 0.5rem 1rem;
}

.dropdown-menu {
    border-radius: 0;
    border: none;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.dropdown-item:hover {
    background-color: #f8f9fa;
}

/* Ajustes para responsividade */
@media (max-width: 991.98px) {
    .logo-img {
        height: 6rem;
    }
    
    .navbar-collapse {
        margin-top: 1rem;
    }

    /* Centralizar itens no mobile */
    .navbar-nav.ml-auto {
        margin: 0 auto;
        text-align: center;
    }
}

/* Estilos para os botões de login e registro */
.navbar-nav.ml-auto .nav-link {
    padding: 0.5rem 1rem;
    transition: color 0.3s ease;
}

.navbar-nav.ml-auto .nav-link:hover {
    color: #007bff;
}

/* Estilo para o badge do carrinho */
.badge {
    position: relative;
    top: -8px;
    right: 5px;
    padding: 0.25em 0.4em;
    font-size: 75%;
    font-weight: 700;
    line-height: 1;
    text-align: center;
    white-space: nowrap;
    vertical-align: baseline;
    border-radius: 0.25rem;
    background-color: #dc3545;
    color: white;
}

/* Ajuste do ícone do carrinho */
.fa-shopping-cart {
    font-size: 1.1rem;
}
</style>